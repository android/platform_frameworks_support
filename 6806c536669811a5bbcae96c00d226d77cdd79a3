{
  "comments": [
    {
      "key": {
        "uuid": "b7d654ee_89966369",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1069,
      "author": {
        "id": 1019013
      },
      "writtenOn": "2018-08-29T11:32:40Z",
      "side": 1,
      "message": "how does the the current user info set in this case? It\u0027s not clearly visible with this change.",
      "range": {
        "startLine": 1069,
        "startChar": 24,
        "endLine": 1069,
        "endChar": 65
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "631f07b5_9f75ba83",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1069,
      "author": {
        "id": 1112679
      },
      "writtenOn": "2018-08-30T07:16:36Z",
      "side": 1,
      "message": "In L1435 and L3164, the info is set before calling onMediaButtonEvent().",
      "parentUuid": "b7d654ee_89966369",
      "range": {
        "startLine": 1069,
        "startChar": 24,
        "endLine": 1069,
        "endChar": 65
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "340cfa1d_3bdd221b",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1069,
      "author": {
        "id": 1112679
      },
      "writtenOn": "2018-08-30T07:20:56Z",
      "side": 1,
      "message": "The reason I changed \u0027handleMediaPlayPauseKeySingleTapIfPending\u0027 is that this method has a problem that it sets the current info as null when it ends.\n\nIf we look at L3182, the current user info should remain, until the fallback callback is processed. We should not set the controller info in this method.",
      "parentUuid": "631f07b5_9f75ba83",
      "range": {
        "startLine": 1069,
        "startChar": 24,
        "endLine": 1069,
        "endChar": 65
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2eec1d08_5d363b9b",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1069,
      "author": {
        "id": 1019013
      },
      "writtenOn": "2018-09-02T09:06:38Z",
      "side": 1,
      "message": "Great bug finding. Could you also write test? It doesn\u0027t necessarily to be in this CL. If current CL already covers it when we lower the API level, you can simply say done.\n\n\nHowever, I\u0027m bit more confused with 1097, where handleMediaPlayerPauseKeySingleTapIfPending(void) still resets the callback. I\u0027m opposing this CL because next maintainer may call handleMediaPlayerPauseKeySingleTapIfPending(void) and it would cause another bug here.\n\nI\u0027ve enfoced handleMediaPlayerPauseKeySingleTapIfPending() to take RemoteUserInfo to make it clear that calling it strictly needs RemoteUserInfo.\n\nGiven my concerns, what about following options instead? You may pick any of these, and you can even propose another, or fine to have VC. I\u0027ll follow your decision?\n\n1. handleMediaPlayerPauseKeySingleTapIfPending() keeps the previously current user, and resets with it.\nPros: less change\nCons: less straightforward\n\n2. caller of handleMediaPlayerPauseKeySingleTapIfPending() (e.g. 1371L) set/reset callback.\nIf so, we may need to find a way to make it more visible\nPros: more match with calling callbacks methods\nCons: someone may forget to do this.",
      "parentUuid": "340cfa1d_3bdd221b",
      "range": {
        "startLine": 1069,
        "startChar": 24,
        "endLine": 1069,
        "endChar": 65
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4eec0b65_133a77b6",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1069,
      "author": {
        "id": 1112679
      },
      "writtenOn": "2018-09-02T11:28:00Z",
      "side": 1,
      "message": "Thanks for your comment. I\u0027ll add comment line-by-line.\n\n \u003e Great bug finding. Could you also write test? It doesn\u0027t necessarily to be in this CL. If current CL already covers it when we lower the API level, you can simply say done.\n\nIt is already done. The next CL I submitted with this lowers the API level of the test as 21.\n\n \u003e However, I\u0027m bit more confused with 1097, where handleMediaPlayerPauseKeySingleTapIfPending(void) still resets the callback. I\u0027m opposing this CL because next maintainer may call handleMediaPlayerPauseKeySingleTapIfPending(void) and it would cause another bug here.\n\nLine 1097 is handleMediaPlayerPauseKeySingleTapIfPending(RemoteUserInfo info) which gets RemoteUserInfo as an argument, and it resets the caller info.\n\nIf you\u0027re mentioning L1107 - handleMediaPlayPauseKeySingleTapIfPending(void), it does not resets the caller info.\n\nHowever I can get your point - we can remove handleMediaPlayerPauseKeySingleTapIfPending(RemoteUserInfo info) and make the caller set the controllerInfo before/after handleMediaPlayerPauseKeySingleTapIfPending(void) is called. (As you suggested as option 2).\n\n \u003e Given my concerns, what about following options instead? You may pick any of these, and you can even propose another, or fine to have VC. I\u0027ll follow your decision?\n1. handleMediaPlayerPauseKeySingleTapIfPending() keeps the previously current user, and resets with it.\nPros: less change\nCons: less straightforward\n2. caller of handleMediaPlayerPauseKeySingleTapIfPending() (e.g. 1371L) set/reset callback.\nIf so, we may need to find a way to make it more visible\nPros: more match with calling callbacks methods\nCons: someone may forget to do this.\n\n\nI chose option 2 and. Please take a look.",
      "parentUuid": "2eec1d08_5d363b9b",
      "range": {
        "startLine": 1069,
        "startChar": 24,
        "endLine": 1069,
        "endChar": 65
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6aa3cf0d_0401ec27",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1091,
      "author": {
        "id": 1019013
      },
      "writtenOn": "2018-08-29T11:32:40Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 1091,
        "startChar": 20,
        "endLine": 1091,
        "endChar": 61
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "743c7236_6453e00c",
        "filename": "media/src/main/java/android/support/v4/media/session/MediaSessionCompat.java",
        "patchSetId": 5
      },
      "lineNbr": 1091,
      "author": {
        "id": 1112679
      },
      "writtenOn": "2018-08-30T07:16:36Z",
      "side": 1,
      "message": "Explained above",
      "parentUuid": "6aa3cf0d_0401ec27",
      "range": {
        "startLine": 1091,
        "startChar": 20,
        "endLine": 1091,
        "endChar": 61
      },
      "revId": "6806c536669811a5bbcae96c00d226d77cdd79a3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}