{
  "comments": [
    {
      "key": {
        "uuid": "0d242b79_2df3eb64",
        "filename": "development/importMaven/build.gradle.kts",
        "patchSetId": 3
      },
      "lineNbr": 469,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2019-06-06T14:32:47Z",
      "side": 1,
      "message": "I notice that this call to transformInternalPomFile exists twice, both here and on line 414.\n\nWould we still need the copyPomFile function to exist if we instead made supportingArtifacts also include the main .pom file in the list of artifacts that it returns?",
      "revId": "67b74614e18e5e1fa8ebbb5aa01f692a7a6326f9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c13ca4c5_92f342e0",
        "filename": "development/importMaven/build.gradle.kts",
        "patchSetId": 3
      },
      "lineNbr": 469,
      "author": {
        "id": 1344433
      },
      "writtenOn": "2019-06-06T18:04:01Z",
      "side": 1,
      "message": "copyPomFile is actually used by the Maven ModelBuildingRequest. It\u0027s a one-off step we need to worry about when dealing with POM files with parent POM files.",
      "parentUuid": "0d242b79_2df3eb64",
      "revId": "67b74614e18e5e1fa8ebbb5aa01f692a7a6326f9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3f000f06_a13449ed",
        "filename": "development/importMaven/build.gradle.kts",
        "patchSetId": 3
      },
      "lineNbr": 469,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2019-06-06T18:51:02Z",
      "side": 1,
      "message": "What if instead of passing copyPomFile to the MavenModuleBuilder on line 202 we instead passed copyArtifact (or updated copyPomFile to invoke copyArtifact) (and updated line 89 to match) so it no longer had to be a one-off step?\n\nI also see some calls to licenseFor in both copyPomFile and copyArtifact too",
      "parentUuid": "c13ca4c5_92f342e0",
      "revId": "67b74614e18e5e1fa8ebbb5aa01f692a7a6326f9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61b1d7e5_4ae92a18",
        "filename": "development/importMaven/build.gradle.kts",
        "patchSetId": 3
      },
      "lineNbr": 469,
      "author": {
        "id": 1344433
      },
      "writtenOn": "2019-06-06T19:36:48Z",
      "side": 1,
      "message": "The problem is one happens to be a MavenPomArtifact which needs special handling and the other is a regular File. Also there are subtle differences in the CopySpec itself. \n\nI do want to refactor this script so its more modular, and has well defined classes that can handle all these cases - in the meantime I wanted to eliminate this manual step.",
      "parentUuid": "3f000f06_a13449ed",
      "revId": "67b74614e18e5e1fa8ebbb5aa01f692a7a6326f9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b47a72a7_a9670d0e",
        "filename": "development/importMaven/build.gradle.kts",
        "patchSetId": 3
      },
      "lineNbr": 469,
      "author": {
        "id": 1137668
      },
      "writtenOn": "2019-06-06T20:12:58Z",
      "side": 1,
      "message": "Hmm. The MavenPomArtifact on line 84 provides a File on line 88 . I\u0027m imagining that MavenModuleResolver would just be updated to return whatever data type is most convenient.\n\nI don\u0027t notice anything important that copyPomFile does that copyArtifact doesn\u0027t also do (the fact that copyPomFile updates the digests but copyArtifacts doesn\u0027t update the digests for .pom files looks like a difference to me but I think that would probably be more confusing than making them use the same logic). copyArtifact also has a dedicated clause that says `if file.name.endsWith(\".pom\")` on line 403. I wouldn\u0027t think that we would want the copying behaviors to differ for parent vs non-parent poms either.\n\nIt\u0027ll probably be some time before I feel comfortable approving this myself but I don\u0027t mind if someone else approves it in the meanwhile given that you\u0027ve mentioned that it would be nice to refactor someday.",
      "parentUuid": "61b1d7e5_4ae92a18",
      "revId": "67b74614e18e5e1fa8ebbb5aa01f692a7a6326f9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1b3c6e14_f332f59f",
        "filename": "development/importMaven/build.gradle.kts",
        "patchSetId": 3
      },
      "lineNbr": 469,
      "author": {
        "id": 1344433
      },
      "writtenOn": "2019-06-06T20:27:20Z",
      "side": 1,
      "message": "You are right. I did try and clean this up in my previous CL. \nI made the change to delegate to copyPomFile() consistently, to make things easier to reason about.",
      "parentUuid": "b47a72a7_a9670d0e",
      "revId": "67b74614e18e5e1fa8ebbb5aa01f692a7a6326f9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}