{
  "comments": [
    {
      "key": {
        "uuid": "cb0754f3_95aa010c",
        "filename": "room/runtime/src/main/java/androidx/room/util/TableInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 425,
      "author": {
        "id": 1060451
      },
      "writtenOn": "2019-07-02T22:52:21Z",
      "side": 1,
      "message": "This breaks the symmetric property of equals (x.equals(y) no longer returns true if and only if y.equals(x)). I think this would be more clear if you moved this equals() logic to a validateAgainst(TableInfo expected) function, then have equals() call that method with a specific code that you need to keep this behavior to handle old generated code despite it breaking symmetry.",
      "range": {
        "startLine": 425,
        "startChar": 16,
        "endLine": 425,
        "endChar": 28
      },
      "revId": "195fba4985362016ce79acf8794c2b8124a0a7a6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ed21b17e_83e4eb13",
        "filename": "room/runtime/src/main/java/androidx/room/util/TableInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 425,
      "author": {
        "id": 1060337
      },
      "writtenOn": "2019-07-08T15:49:50Z",
      "side": 1,
      "message": "+1 to ian.",
      "parentUuid": "cb0754f3_95aa010c",
      "range": {
        "startLine": 425,
        "startChar": 16,
        "endLine": 425,
        "endChar": 28
      },
      "revId": "195fba4985362016ce79acf8794c2b8124a0a7a6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9489b1fd_c65a86d7",
        "filename": "room/runtime/src/main/java/androidx/room/util/TableInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 425,
      "author": {
        "id": 1258207
      },
      "writtenOn": "2019-07-08T17:23:28Z",
      "side": 1,
      "message": "It does break symmetry but old gen code uses equals and we can\u0027t change that. Ideally I wish I could add a property to tell whether the table info was created from the PRAGMA vs generated.\n\n\u0027validateAgainst\u0027 is nice but I don\u0027t know if its worth it given this is a library restricted class. I would need to change a bunch of other code to keep things consistent, FtsTableInfo, ViewInfo and the inner classes would also need to not use equals() but this new method. Then there is the issue that we rely on HashSet, HashMap and ArrayList equals, we would need to stop using those in favor of our own methods that use validateAgainst().",
      "parentUuid": "ed21b17e_83e4eb13",
      "range": {
        "startLine": 425,
        "startChar": 16,
        "endLine": 425,
        "endChar": 28
      },
      "revId": "195fba4985362016ce79acf8794c2b8124a0a7a6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "36517bbf_5ea3f99c",
        "filename": "room/runtime/src/main/java/androidx/room/util/TableInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 425,
      "author": {
        "id": 1060337
      },
      "writtenOn": "2019-07-08T18:10:49Z",
      "side": 1,
      "message": "\u003e It does break symmetry but old gen code uses equals and we can\u0027t change that. Ideally I wish I could add a property to tell whether the table info was created from the PRAGMA vs generated.\n\nWhy is it hard (besides being a ton of code :) ) We can add an overload constructor that defaults to false (or an enum might be better).",
      "parentUuid": "9489b1fd_c65a86d7",
      "range": {
        "startLine": 425,
        "startChar": 16,
        "endLine": 425,
        "endChar": 28
      },
      "revId": "195fba4985362016ce79acf8794c2b8124a0a7a6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "171d5e9c_28b91599",
        "filename": "room/runtime/src/main/java/androidx/room/util/TableInfo.java",
        "patchSetId": 1
      },
      "lineNbr": 425,
      "author": {
        "id": 1258207
      },
      "writtenOn": "2019-07-08T20:09:53Z",
      "side": 1,
      "message": "Talked to Ian a bit more and went with the ideal plan of having an identifier to know from where the column was created from. We keep using equals and we keep its symmetry and we keep the desired behavior between old and new room. \u003dD",
      "parentUuid": "36517bbf_5ea3f99c",
      "range": {
        "startLine": 425,
        "startChar": 16,
        "endLine": 425,
        "endChar": 28
      },
      "tag": "autogenerated:gerrit:newPatchSet",
      "revId": "195fba4985362016ce79acf8794c2b8124a0a7a6",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}