{
  "comments": [
    {
      "key": {
        "uuid": "64a24990_81f7d2be",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1286929
      },
      "writtenOn": "2019-05-15T17:19:36Z",
      "side": 1,
      "message": "We could add a method in EnumWrapper to do this in a generic way. \nValues are transmitted as names anyways, so implementing the lookup over a different enum has no extra cost.",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "948bd240_07212be0",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1272573
      },
      "writtenOn": "2019-05-16T00:07:09Z",
      "side": 1,
      "message": "I don\u0027t understand how we\u0027d do that. Proto values are transmitted as numbers.\n\nWe\u0027d need to know that a proto enum is UNRECOGNIZED in a generic way, which I don\u0027t think we can.",
      "parentUuid": "64a24990_81f7d2be",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f469d9c1_5a6b3622",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1286929
      },
      "writtenOn": "2019-05-16T00:40:05Z",
      "side": 1,
      "message": "We could add this to EnumWrapper:\n\n    @NonNull\n    public static \u003cT extends Enum\u003cT\u003e, P extends Enum\u003cP\u003e\u003e P toProto(@Nullable EnumWrapper\u003cT\u003e wrapper, @NonNull P defaultValue) {\n        if (wrapper !\u003d null) {\n            for (String value : wrapper.mValues) {\n                P result \u003d getEnumByName(defaultValue.getDeclaringClass(), value);\n                if (result !\u003d null) {\n                    return result;\n                }\n            }\n        }\n        return defaultValue;\n    }\n\nThen this call would become:\n\nreturn EnumWrapper.getProtoValue(mTraffic, DestinationProto.Traffic.UNKNOWN);",
      "parentUuid": "948bd240_07212be0",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6d06648d_a5d755c7",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1272573
      },
      "writtenOn": "2019-05-16T00:48:35Z",
      "side": 1,
      "message": "I expect that ProGuard might muck with the enum names, and that we might even want ProGuard to muck with the enum names, so that they\u0027re smaller in the APK? So I\u0027m a little worried about adding more string-typing between these APIs. I\u0027m not super-opposed but am just slightly worried.",
      "parentUuid": "f469d9c1_5a6b3622",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d12bcb9b_25683a9d",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1384412
      },
      "writtenOn": "2019-05-16T23:57:38Z",
      "side": 1,
      "message": "I just generated the entire thing using awk from the proto file. Less logic that can go wrong ;)",
      "parentUuid": "6d06648d_a5d755c7",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "52ed8aeb_0034135c",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1286929
      },
      "writtenOn": "2019-05-17T00:07:22Z",
      "side": 1,
      "message": "This doesn\u0027t use reflection. Instead it uses Enum#name() and the string returned by this method is not altered by proguard.\nAwk doesn\u0027t scale to other developers.",
      "parentUuid": "6d06648d_a5d755c7",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "96f4bf21_94f5e30b",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1272573
      },
      "writtenOn": "2019-05-17T01:18:41Z",
      "side": 1,
      "message": "I think ProGuard has a pass that removes enum names if they\u0027re not accessed (and, I think, converts them to ints?), which is somewhat desirable to minimize binary size.",
      "parentUuid": "52ed8aeb_0034135c",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b36ba20e_eeb676fd",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1384412
      },
      "writtenOn": "2019-05-17T02:56:49Z",
      "side": 1,
      "message": "Won\u0027t future developers only need to add a case for whatever new enum value they create?\nI guess there is an argument for what happens if they forget to add it, but worst case is that it goes into UNKNOWN...",
      "parentUuid": "52ed8aeb_0034135c",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2cc7229_478dae14",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 306,
      "author": {
        "id": 1143068
      },
      "writtenOn": "2019-05-18T03:41:04Z",
      "side": 1,
      "message": "To catch the \"forget to add it\" case, you could just write a test that iterates over all the public enum values and verifies that they get preserved through serialisation+deserialisation?",
      "parentUuid": "b36ba20e_eeb676fd",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4b075216_4e1736cb",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 362,
      "author": {
        "id": 1286929
      },
      "writtenOn": "2019-05-15T17:19:36Z",
      "side": 1,
      "message": "We could also generalize this inside the EnumWrapper (or some other place).",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2723cd60_fda19476",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 362,
      "author": {
        "id": 1286929
      },
      "writtenOn": "2019-05-16T00:40:05Z",
      "side": 1,
      "message": "And we could add this to EnumWrapper:\n\n    @NonNull\n    public static \u003cT extends Enum\u003cT\u003e, P extends Enum\u003cP\u003e\u003e T fromProto(@NonNull List\u003cP\u003e values, @NonNull T defaultValue) {\n        for (P value : values) {\n            T result \u003d getEnumByName(defaultValue.getDeclaringClass(), value.name());\n            if (result !\u003d null) {\n                return result;\n            }\n        }\n        return defaultValue;\n    }\n\nThen this would become:\n\nreturn EnumWrapper.fromProto(proto.getTrafficList(), Traffic.UNKNOWN);\n\nThe \"UNRECOGNIZED\" case would fall in the same category as an unknown enum name.",
      "parentUuid": "4b075216_4e1736cb",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8c8fac7d_6b53906d",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/Destination.java",
        "patchSetId": 4
      },
      "lineNbr": 362,
      "author": {
        "id": 1384412
      },
      "writtenOn": "2019-05-16T23:57:38Z",
      "side": 1,
      "message": "As above",
      "parentUuid": "2723cd60_fda19476",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e9f05338_196aeed5",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/NavigationState.java",
        "patchSetId": 4
      },
      "lineNbr": 243,
      "author": {
        "id": 1286929
      },
      "writtenOn": "2019-05-15T17:19:36Z",
      "side": 1,
      "message": "We could fallback here to ParcelUtils.fromParcelable() to allow interoperability while Maps and the Chinese nav app are being migrated.",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5d1dc58b_2d6a4f05",
        "filename": "car/cluster/src/main/java/androidx/car/cluster/navigation/NavigationState.java",
        "patchSetId": 4
      },
      "lineNbr": 243,
      "author": {
        "id": 1384412
      },
      "writtenOn": "2019-05-16T03:43:06Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e9f05338_196aeed5",
      "revId": "4fe736e5f4cc87116ae5485512a16721b1e9137c",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}