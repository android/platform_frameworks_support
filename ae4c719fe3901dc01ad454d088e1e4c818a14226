{
  "comments": [
    {
      "key": {
        "uuid": "8fc35b66_36a5bc08",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 202,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "this is IO operation, but we don\u0027t reuse IO thread for thhat.",
      "range": {
        "startLine": 202,
        "startChar": 32,
        "endLine": 202,
        "endChar": 42
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52c94d92_b849bfaa",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 202,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8fc35b66_36a5bc08",
      "range": {
        "startLine": 202,
        "startChar": 32,
        "endLine": 202,
        "endChar": 42
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5de0a99f_3343bf41",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 336,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "I would add a copy constructor to ShortcutInfoCompat.Builder(ShortcutInfoCompat)",
      "range": {
        "startLine": 329,
        "startChar": 69,
        "endLine": 336,
        "endChar": 82
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b4c32273_2f42cef0",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 336,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5de0a99f_3343bf41",
      "range": {
        "startLine": 329,
        "startChar": 69,
        "endLine": 336,
        "endChar": 82
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4dbdd478_d00e35f8",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 343,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "why?",
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afe38218_d7337208",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 343,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "Fixed by throwing the exception",
      "parentUuid": "4dbdd478_d00e35f8",
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4eb09498_e755bad6",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 403,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "this \"synchronized\" does nothing, because nothing else in this class takes the same lock ( synchronized methods or synchronized(this) and this method is called always from CacheUpdater thread",
      "range": {
        "startLine": 403,
        "startChar": 4,
        "endLine": 403,
        "endChar": 16
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "babab40d_49cea1b4",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 403,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4eb09498_e755bad6",
      "range": {
        "startLine": 403,
        "startChar": 4,
        "endLine": 403,
        "endChar": 16
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ef2f042d_a3f53984",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 405,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "this methods seems to be called from the one thread - you can remove volatile from this future",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 30
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a24fa99c_dac6e0f7",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 405,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ef2f042d_a3f53984",
      "range": {
        "startLine": 405,
        "startChar": 12,
        "endLine": 405,
        "endChar": 30
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a48726f_529e039c",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 409,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "doesn\u0027t work this way. values() reflects changes in parent map, so you can get ConcurrentModificationException during iteration in line 417",
      "range": {
        "startLine": 409,
        "startChar": 71,
        "endLine": 409,
        "endChar": 77
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "affa8c81_22fb231d",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 409,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "Great catch! Also double checked usages of .values() in other places.",
      "parentUuid": "5a48726f_529e039c",
      "range": {
        "startLine": 409,
        "startChar": 71,
        "endLine": 409,
        "endChar": 77
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab8509bb_3ff1cd08",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 714,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-22T11:52:19Z",
      "side": 1,
      "message": "we shouldn\u0027t drop exceptions on the floor, dev should be able to retry operation or smth. Because currently, bitmaps are just missing for shortcuts you added  and you don\u0027t have any way to know or recover that.",
      "range": {
        "startLine": 712,
        "startChar": 10,
        "endLine": 714,
        "endChar": 13
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "514349e3_f90ca0f8",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 714,
      "author": {
        "id": 1140244
      },
      "writtenOn": "2018-10-22T22:00:37Z",
      "side": 1,
      "message": "I agree. But, note that this is run in the background thread (a Runnable in mDiskIoService) and we will need a callback mechanism to pass the exception to the developer. Current APIs in ShortcutManager, which we are trying to cover in the support lib, also drop the exception and just do a wtf log. see https://cs.corp.google.com/android/frameworks/base/services/core/java/com/android/server/pm/ShortcutBitmapSaver.java?rcl\u003d2aa44d9a716d59feead3fd2187fc4490752656d2\u0026l\u003d181",
      "parentUuid": "ab8509bb_3ff1cd08",
      "range": {
        "startLine": 712,
        "startChar": 10,
        "endLine": 714,
        "endChar": 13
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ccd51e33_df9ef8cf",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 714,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-23T13:13:02Z",
      "side": 1,
      "message": "Yeah, you need some callback mechanism (ListenableFuture maybe?). Yeah, the framework implementation does this, but we don\u0027t blindly backport things, we tried to fix things along the way and provide better development experience.",
      "parentUuid": "514349e3_f90ca0f8",
      "range": {
        "startLine": 712,
        "startChar": 10,
        "endLine": 714,
        "endChar": 13
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0d4ad24_23786d35",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 714,
      "author": {
        "id": 1060398
      },
      "writtenOn": "2018-10-23T15:15:19Z",
      "side": 1,
      "message": "I am not sure how that would be possible here. This code is only for lower SDK version, so even if we provide any callback, it will not be available on newer android versions.",
      "parentUuid": "ccd51e33_df9ef8cf",
      "range": {
        "startLine": 712,
        "startChar": 10,
        "endLine": 714,
        "endChar": 13
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f0a8c85e_07aa60e0",
        "filename": "core/src/main/java/androidx/core/content/pm/ShortcutInfoCompatSaver.java",
        "patchSetId": 35
      },
      "lineNbr": 714,
      "author": {
        "id": 1098853
      },
      "writtenOn": "2018-10-23T15:29:12Z",
      "side": 1,
      "message": "Should we improve system api? Or does it need to live in system server (can we deprecate it there and only provide androidx version)?",
      "parentUuid": "a0d4ad24_23786d35",
      "range": {
        "startLine": 712,
        "startChar": 10,
        "endLine": 714,
        "endChar": 13
      },
      "revId": "ae4c719fe3901dc01ad454d088e1e4c818a14226",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}