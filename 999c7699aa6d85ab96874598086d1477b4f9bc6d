{
  "comments": [
    {
      "key": {
        "uuid": "3a4f5466_8331d647",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "I think this would be easier to follow if some of the static inner classes were moved into their own files (especially utility things like the forked url matcher). This is pretty long. I think they were inlined originally to make it easier to just drop the source file into a developer\u0027s project, but that\u0027s not how the androidx library gets used (it\u0027s precompiled by google) so the same consideration doesn\u0027t exist.",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e78b0d2e_474d8001",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-04T15:26:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3a4f5466_8331d647",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "69762516_b6fce006",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 70,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "Should probably match the class name :)",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e56b6770_54a8fbc7",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 70,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-02T12:05:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "69762516_b6fce006",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10f35912_befcb5a8",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "a different",
      "range": {
        "startLine": 78,
        "startChar": 49,
        "endLine": 78,
        "endChar": 58
      },
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5cd085fa_bff84fd7",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 78,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-02T12:05:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10f35912_befcb5a8",
      "range": {
        "startLine": 78,
        "startChar": 49,
        "endLine": 78,
        "endChar": 58
      },
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7282e11_c4927206",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 90,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "Do you know why it was necessary to fork android.content.UriMatcher here? Do we actually use all the functionality implemented? We probably should cut it down to only the bits that are actually useful if we can\u0027t avoid having a separate copy.",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d09f7c5a_23d50f51",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 90,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-10T13:54:55Z",
      "side": 1,
      "message": "As far as I understand, android.content.UriMatcher ignores the scheme part in the URI.\n\nFor example http://a.b.c/ and https://a.b.c/ will be matched to the same code.\n\nAs well as it returns a handler object to handle this matched URI instead of a int code. I think it makes the code easier to organize.\n\nDo you think I should change it\u0027s name in order not to be confused by android.content.UriMatcher?",
      "parentUuid": "e7282e11_c4927206",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4d083344_ef13592c",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 90,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-17T15:27:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d09f7c5a_23d50f51",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0e27125a_6485d627",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 284,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "The test suite\u0027s context should probably just be made to have getApplicationContext return itself, to avoid this check. Real contexts do that if they are already app contexts I believe.",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4f59d728_1e646c7d",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 284,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-04T15:26:13Z",
      "side": 1,
      "message": "Well, I am kind of confused about what you mean here. I didn\u0027t find anything in documentation about getApplicationContext returning itself and I don\u0027t know how to make it do so.\n\nI kept the condition for now but moved it to the constructor.",
      "parentUuid": "0e27125a_6485d627",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "343ec41b_fb9af031",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 284,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2019-01-04T15:31:01Z",
      "side": 1,
      "message": "Whatever context object that is being passed into this test is broken if getApplicationContext can return null; it should always return a valid context. If the context is already an application context, then getApplicationContext should return \"this\". So, rather than have this check here with a comment explaining why it\u0027s doing the weird thing, we should track down where the context object comes from and fix it at the source. You\u0027ll have to find the actual class that\u0027s being passed in here (the thing that implements Context) and change the definition of the getApplicationContext method.",
      "parentUuid": "4f59d728_1e646c7d",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26693e18_62ca11f7",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 284,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-15T01:45:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "343ec41b_fb9af031",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27150732_9cb3a874",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 309,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "The version of this in Chromium has been updated since this library was written and now tries stripping components off the class name to deal with some modern styles of building apps that don\u0027t guarantee the R class is named the same thing as the package name - we might want to port that logic over (and in fact, you might want to look at what else has changed in the Chromium version of AndroidProtocolHandler to see if there\u0027s any other interesting fixes/etc that happened since this was all written).\n\nAlso, I\u0027m not sure why this code *does* rely on looking up the R class via reflection instead of using Resources.getIdentifier() - while I don\u0027t think we should switch to that right now, we might want to follow up in future and see if that might be a better approach?",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "37986a9f_dd4263b5",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 309,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-02T12:05:23Z",
      "side": 1,
      "message": "I did a quick try to port the code but it is calling some native methods and didn\u0027t know how to resolve these imports here so I ended up keeping the old version.\n\nWill look into this.",
      "parentUuid": "27150732_9cb3a874",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0f34091c_0070fa08",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 309,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-04T15:26:13Z",
      "side": 1,
      "message": "I Ported the recent Version of AndroidProtocolHandler. I removed the native methods calls and unused/unnecessary code.\n\nI also converted the methods to non static to use the Context passed in the constructor instead of ContextUtils.getApplicationContext().\n\nI found that the recent version of AndroidProtocolHandler still uses reflection to lookup R class. I agree with you to investigate using Resources.getIdentifier() in the future.\n\nDo you think I should port AndroidProtocolHandler tests as well from the chromium code? Since I modified a little in the class.\n\nAlso I wonder how to write about porting the code from chromium code in docs? and if this should affect the open source license at the top of the file?",
      "parentUuid": "37986a9f_dd4263b5",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4cced1ae_183b109e",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 309,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-15T01:45:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0f34091c_0070fa08",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "10f7f3f2_34188248",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 332,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "invoked",
      "range": {
        "startLine": 332,
        "startChar": 87,
        "endLine": 332,
        "endChar": 93
      },
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cd873d3f_7ccf6ecc",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 332,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-02T12:05:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "10f7f3f2_34188248",
      "range": {
        "startLine": 332,
        "startChar": 87,
        "endLine": 332,
        "endChar": 93
      },
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dd929b60_865ee39e",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 403,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "This shouldn\u0027t be hidden, it\u0027s the return type of a public method and used in the example code :)",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3e1f38b_7009765a",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 403,
      "author": {
        "id": 1141809
      },
      "writtenOn": "2018-12-11T04:36:29Z",
      "side": 1,
      "message": "Related (but not to contradict Torne\u0027s point): @hide should be accompanied by @RestrictTo(), when used. You can find examples under androidx.webkit.",
      "parentUuid": "dd929b60_865ee39e",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "58526f14_0fa908c1",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 403,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-02T12:05:23Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d3e1f38b_7009765a",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9cb1e432_8922cabb",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 433,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "This is just separate for the test code\u0027s benefit, right? It\u0027s nice to mark things that would be private if they weren\u0027t needed for unit tests as @VisibleForTesting, to make it clear what the \"real\" API surface of the class actually is.",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bdb34fad_feed7d95",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 433,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-04T15:26:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9cb1e432_8922cabb",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0fddac18_12ead94f",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 436,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "I think we should use a default domain that\u0027s consistent for a given application, instead of a random UUID. This would make it easier for developers to write content that might have absolute URLs in it, or to respond with CORS headers from servers.\n\nOne option would be to use the application package name as the subdomain here, but it might not be valid(?) and might be too long? Maybe we could use a hash of it?",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "402841b3_cf5211c7",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 436,
      "author": {
        "id": 1141809
      },
      "writtenOn": "2018-12-11T04:36:29Z",
      "side": 1,
      "message": "I\u0027d encourage a design doc comparing alternative approaches, and weighing pros/cons.",
      "parentUuid": "0fddac18_12ead94f",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a2942f3e_1db30dac",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 436,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-17T15:27:46Z",
      "side": 1,
      "message": "Removed the randomly generated domain. Using package name as a default domain now, will look into other alternatives later today.",
      "parentUuid": "402841b3_cf5211c7",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bb96a2e7_a3523c10",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 436,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-17T19:47:51Z",
      "side": 1,
      "message": "unresolve",
      "parentUuid": "a2942f3e_1db30dac",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a581fc8_00514d43",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 478,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "Nate, is this at risk of causing validation failures on older versions by referencing a new class? I\u0027m still not sure when that applies :)",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3deeb768_214d8ea3",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 478,
      "author": {
        "id": 1141809
      },
      "writtenOn": "2018-12-11T04:36:29Z",
      "side": 1,
      "message": "Yes. This method body calls WebResourceRequest#getUrl, which is new in 21. I\u0027m hesitant to ask for verification fixes because (1) literally every class in androidx.webkit fails verification and (2) it\u0027s hard to prevent regressions.\n\nAlso, because this method calls #getUrl unconditionally, this method should be marked @RequiresApi(21).",
      "parentUuid": "9a581fc8_00514d43",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3c9803d_7a095f69",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 478,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-04T15:26:13Z",
      "side": 1,
      "message": "Done\n\nI\u0027m interested to get more context this.",
      "parentUuid": "3deeb768_214d8ea3",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c19ed4e2_05ee02ea",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 780,
      "author": {
        "id": 1021004
      },
      "writtenOn": "2018-12-10T22:14:12Z",
      "side": 1,
      "message": "I don\u0027t think these two need to be separate. The handler always just unwraps the WebResourceRequest into a URL anyway, so we can just do that higher up in shouldInterceptRequest instead and combine these codepaths together.",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e1b6cce6_e43b64ad",
        "filename": "webkit/src/main/java/androidx/webkit/WebViewLocalServer.java",
        "patchSetId": 5
      },
      "lineNbr": 780,
      "author": {
        "id": 1402701
      },
      "writtenOn": "2019-01-10T13:54:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c19ed4e2_05ee02ea",
      "revId": "999c7699aa6d85ab96874598086d1477b4f9bc6d",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}